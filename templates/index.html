{% extends "base.html" %}

{% block title %}
    shopkart
{% endblock title %}

{% block content %}
     <div class="container-fluid">
    <!-- ===========================start carousel================================ -->
        <div class="row">
            <div id="carouselExample" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                  <div class="carousel-item active">
                    <img src="https://rukminim2.flixcart.com/fk-p-flap/1600/270/image/dd484f1b19c67712.jpg?q=20" class="d-block w-100" alt="...">
                  </div>
                  <div class="carousel-item">
                    <img src="https://rukminim2.flixcart.com/fk-p-flap/1600/270/image/139e8c93a918366a.jpeg?q=20" class="d-block w-100" alt="...">
                  </div>
                  <div class="carousel-item">
                    <img src="https://rukminim2.flixcart.com/fk-p-flap/1600/270/image/a76db078b31108e1.jpeg?q=20" class="d-block w-100" alt="...">
                  </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </button>
              </div>
        </div>
    <!-- ===========================end carousel================================ -->
    <div class="row my-3">
        <!-- ===========================left panel start================================ -->
        <div class="col-lg-2 my-3">
          <div class="sort-section p-2">
            <div class="sort-options">
              <span class="fw-semibold">Price</span>
              <ul class="nav flex-column">
                <!-- Add the 'product' GET parameter to ensure category is selected in the sorting links -->
                <li class="nav-item">
                  <a href="?product={{ category.name }}&sort=lth" class="nav-link">Low to High</a>
                </li>
                <li class="nav-item">
                  <a href="?product={{ category.name }}&sort=htl" class="nav-link">High to Low</a>
                </li>
                <li class="nav-item">
                  <a href="?product={{ category.name }}" class="nav-link text-primary">Clear</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <!-- ===========================left panel end================================ -->

        <!-- ===========================right panel start================================ -->
        <div class="col-lg-10 my-3">
          <div class="row justify-content-start p-2">
              {% for product in products %}
              <div class="col-6 col-sm-4 col-md-3 col-lg-2 my-2 d-flex">
                  <a href="{% url 'product_details' product.id %}" class="nav-link w-100">
                      <div class="card p-1" style="width: 100%;">
                          <div style="height: 180px; display: flex; justify-content: center; align-items: center; overflow: hidden;">
                            <img src="{{ product.image.url }}" class="card-img-top object-fit-contain" alt="Product Image" style="max-height: 100%; max-width: 100%;">
                          </div>
                          <div class="card-body text-center">
                              <p class="card-title mb-1">{{ product.title|truncatechars:15 }}</p>
                              <p class="card-text text-muted">{{ product.price }}</p>
                          </div>
                      </div>
                  </a>
              </div>
              {% empty %}
              <div class="col-12 text-center">
                  <p class="fs-3">No Records Found</p>
              </div>
              {% endfor %}
          </div>
      </div>
        <!-- ===========================right panel end================================ -->
     </div>

{% endblock content %}